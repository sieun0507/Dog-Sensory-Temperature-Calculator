# 🐾 Dog-Sensory-Temperature-Calculator (반려견 맞춤형 날씨 알리미)

실시간 실내/실외 날씨 데이터와 반려견의 개별 특성을 종합하여, 사람과 반려견을 위한 맞춤형 체감온도 및 산책 위험도를 알려주는 IoT 프로젝트입니다.



---

## 📅 프로젝트 개요

### 1. 개발 동기 (문제 인식)
단순한 기온 정보만으로는 반려견의 실제 산책 위험도를 판단하기 어렵습니다. 반려견은 견종, 털 길이, 나이, 체형에 따라 날씨에 대한 민감도가 모두 다르며, 특히 혹서기/혹한기에는 습도와 풍속이 체감 온도에 치명적인 영향을 미칩니다.

### 2. 프로젝트 목표
* **정확성:** 기온, 습도, 풍속을 모두 고려한 과학적인 계산 방식을 사용합니다.
* **맞춤화:** 사용자가 등록한 강아지 프로필(견종, 나이, 털, 체형)에 따라 위험도를 개별 조정합니다.
* **실용성:** 실내/실외 환경을 구분하여 분석하고, 위험 단계에 따라 실시간 시각/청각적 경보를 제공합니다.

---

## 🛠️ 시스템 구성 (Architecture)

본 시스템은 아두이노(센서 허브)와 PC(파이썬/스트림릿)가 블루투스(또는 USB)로 통신하는 IoT 구조로 작동합니다.

* **아두이노 (HW):** 실내 온습도를 측정하고, PC로부터 받은 명령에 따라 LED/부저 경보를 울립니다.
* **파이썬 (SW):** 아두이노 센서 값과 공공 API의 실외 날씨 값을 받아, 모든 계산을 처리하고 Streamlit을 통해 웹 대시보드를 생성합니다.
* **API:** 실외 날씨 정보(온도, 습도, 풍속)를 가져오기 위해 **OpenWeatherMap**을, 주소 좌표 변환을 위해 **Nominatim**을 사용합니다.

  [아두이노 + 센서/LED] <-- (Bluetooth) --> [PC (Python/Streamlit)] <-- (Internet) --> [날씨/위치 API]

---

## ⚙️ 핵심 기능 및 계산 로직

### 1. 사람 체감온도 계산
* **10℃ 기준 모델:** 10℃를 기준으로 여름/겨울 모델을 분리합니다.
* **여름철 (기온 > 10℃):** 기온 27℃ 이상 & 습도 40% 이상일 때만 **NOAA 열지수** 공식을 적용합니다. 그 외에는 실제 기온과 동일하게 처리합니다.
* **겨울철 (기온 ≤ 10℃):** 기상청의 **풍속체감온도(Wind Chill)** 공식을 적용합니다.

### 2. 강아지 위험도 계산 (3단계 로직)

#### 1단계: 날씨 기반 기본 위험도
* **여름철:** 온도, 습도, **풍속의 세기**(냉각/오븐 효과)를 조합하여 기본 등급 산출
* **겨울철:** 온도, **강아지 크기**(소/중/대), **풍속의 세기**를 조합하여 기본 등급 산출

#### 2단계: 개별 특성 가감
* 1단계 결과에 강아지 프로필을 적용하여 위험도를 가감합니다.
* **위험도 상승 (+):**
    * **여름:** 장모종/이중모, 단두종, 비만 체형
    * **겨울:** 단모종, 마른 체형
    * **공통:** 성장기(1세 미만) 또는 노령견
* **보호 요인 (-):**
    * **겨울:** 장모종/이중모 (-2단계)

#### 3단계: 실시간 경보
* 파이썬이 계산한 최종 실내 위험도(`S`, `C`, `D`, `V`)를 아두이노로 전송합니다.
* 아두이노는 신호에 따라 3색 LED와 부저(매우 위험 시)를 작동시킵니다.

---

## 🔧 하드웨어 구성

* Arduino Uno R3
* DHT22 온습도 센서 (또는 DHT11)
* Bluetooth 모듈 (HC-05 또는 HC-06)
* LED 3개 (초록, 노랑, 빨강)
* 220Ω 저항 3개
* 수동 부저 (Passive Buzzer)
* 9V 배터리 또는 보조 배터리 (무선 전원용)
* 브레드보드 및 점퍼 와이어

---

## 💻 소프트웨어 및 실행 방법

### 1. 필요 라이브러리 (Python)
터미널에서 아래 명령어를 실행하여 필요한 라이브러리를 설치합니다.
```bash
pip install streamlit pyserial requests
```

### 2. 아두이노 설정
아두이노 IDE에 Arduino_Code.ino 스케치를 업로드합니다.

하드웨어 회로를 구성하고, 9V 배터리 또는 보조 배터리로 전원을 공급합니다.

### 3. 스트림릿 실행
PC와 아두이노의 블루투스 모듈을 페어링(PIN: 1234 또는 0000)합니다.

PC의 블루투스 설정에서 HC-05의 '나가는(Outgoing)' COM 포트 번호를 확인합니다.

app.py 코드 상단의 ARDUINO_PORT = 'COM_PORT' 부분을 확인한 포트 번호로 수정합니다.

터미널에서 아래 명령어를 입력하여 스트림릿 앱을 실행합니다.
```bash
streamlit run app.py
```
웹 브라우저에서 열린 스트림릿 화면의 사이드바에 위치와 OpenWeatherMap API 키를 입력하고 강아지 프로필을 설정한 뒤 사용합니다.

## 🚀 향후 개선 방향
데이터 로깅: 실내 온습도 데이터를 파일로 저장하여 장기적인 변화 그래프 시각화.

푸시 알림: 텔레그램(Telegram) 봇 등을 연동하여, '매우 위험' 단계 시 보호자의 스마트폰으로 원격 푸시 알림 전송.

자동 제어: IR 송신 모듈을 추가하여 실내 위험도에 따라 에어컨/선풍기를 자동으로 제어.
